<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name=viewport content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
    <title>推推</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/iconfont.css">
  </head>
  <body id="account">
    <div id="app" v-cloak style="padding-top: 50px;">
        <div class="account_head" style="position: fixed; left:0; top:0;width: 100%;height: 50px; background-color: #fff;">
            <div class="tit" v-for="(tab,index) in tabs" @click="add(index)" :class="{'active_tit':index==current}">{{tab.tit}}</div>
        </div>
        
        <ul class="account_list">
            <li v-if="item.type==current||current==0" v-for="item in list">
                <div class="left">
                    <div class="time">{{item.time}}</div>
                    <div class="txt">{{item.txt}}</div>
                </div>
                <div class="right">
                    <div class="tit" v-if="item.number[0]>0">
                        <h3>门槛</h3>
                        <span>+{{item.number[0].toFixed(2)}}元</span>
                    </div>
                    <div class="tit" v-if="item.number[1]>0">
                        <h3>点击</h3><span>+{{item.number[1].toFixed(2)}}元</span>
                    </div>
                    <div class="tit" v-if="item.number[2]<0">
                        <big>{{item.number[2].toFixed(2)}}元</big>
                    </div>
                </div>
            </li>
        </ul>

        <infinite-loading  :on-infinite="onInfinite" ref="infiniteLoading">
            <span slot="no-results">没有数据</span>
            <span slot="no-more">已经到末尾</span>
        </infinite-loading>
        <div class="h30"></div>
    </div>
  </body>
</html>

<script src="js/vue2.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/vue-resource.js"></script>
<script src="js/vue-infinite-loading.js"></script>
<script src="js/common.js"></script>
<script>
    const AJAX_PATH = "mocks/acc.json";
    var vm = new Vue({
      el: '#app',
      methods: {
        add: function (message) {
            this.current=message
        },

        onInfinite:function () {
            setTimeout(function() {
                var call = this.$http({
                      method:'GET',
                      url:AJAX_PATH
                      });

                call.then(function (e) {
                    if(e.body.errno===0){
                        this.list = this.list.concat(e.body.list);
                        // 继续载入
                        this.$refs.infiniteLoading.$emit('$InfiniteLoading:loaded');
                    }else{
                        // 结束载入 (末页)
                        this.$refs.infiniteLoading.$emit('$InfiniteLoading:complete');
                    }
                    
                });
            }.bind(this), 500);
        }
        
      },
      data: {
        current:0,
        tabs:[
            {tit:'全部'},
            {tit:'任务'},
            {tit:'提现'},
        ],
        list:[
            {
            time:'4月23日 12:30',
            txt:'骑ofo小黄车，感受美好未来',
            number:[1,12,''],
            type:1
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'骑ofo小黄车，感受美好未来',
            number:[1,12,''],
            type:1
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'骑ofo小黄车，感受美好未来',
            number:[+1.00,+12.00,''],
            type:1
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'骑ofo小黄车，感受美好未来',
            number:[+1.00,+12.00,''],
            type:1
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'提现',
            number:['','',-13.00],
            type:2
        },{
            time:'4月23日 12:30',
            txt:'骑ofo小黄车，感受美好未来',
            number:[+1.00,+12.00,''],
            type:1
        },{
            time:'4月23日 12:30',
            txt:'提现-----',
            number:['','',-13.00],
            type:2
        }

        ]
            
    
    
  }
})



</script>